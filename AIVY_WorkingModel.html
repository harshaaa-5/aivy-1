<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIVY - AI Learning Assistant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        /* Complete CSS Styling */
        :root {
            --color-main: #1FB8CD;
            --color-accent: #FFC185;
            --color-bg: #FCFCF9;
            --color-dark-bg: #222831;
            --color-alt: #B4413C;
            --color-success: #21B885;
            --shadow-lg: 0 10px 24px rgba(31,184,205,0.13);
            --radius-lg: 18px;
            --transition: all 240ms cubic-bezier(0.64,0.57,0.67,1.53);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Arial', sans-serif;
            background: var(--color-bg);
            margin: 0;
            min-height: 100vh;
            color: #134259;
            transition: background var(--transition), color var(--transition);
        }

        [data-theme="dark"] {
            --color-bg: #1a1a2e;
            --color-main: #0f3460;
            --shadow-lg: 0 10px 24px rgba(0,0,0,0.3);
        }

        [data-theme="dark"] body {
            background: var(--color-dark-bg);
            color: #E6EFFF;
        }

        /* Landing Screen */
        .landing-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1FB8CD 0%, #222831 100%);
            animation: fadeIn 900ms ease;
            position: fixed;
            width: 100vw;
            z-index: 9999;
            opacity: 1;
            pointer-events: auto;
            transition: opacity 0.8s;
        }
        
        .landing-screen.inactive {
            opacity: 0;
            pointer-events: none;
        }

        .landing-content {
            background: rgba(255,255,255,0.95);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            padding: 60px 40px;
            text-align: center;
            max-width: 450px;
            width: 90%;
            position: relative;
            z-index: 2;
        }

        .logo-animation .ai-brain {
            margin: 0 auto 30px;
            display: flex;
            justify-content: center;
            gap: 6px;
        }

        .ai-brain .brain-dot {
            width: 18px;
            height: 18px;
            background: var(--color-main);
            border-radius: 50%;
            animation: brainPulse 2s infinite cubic-bezier(.8,0,.6,1.8);
        }

        .brain-dot:nth-child(1) { animation-delay: 0s; }
        .brain-dot:nth-child(2) { animation-delay: 0.2s; }
        .brain-dot:nth-child(3) { animation-delay: 0.4s; }
        .brain-dot:nth-child(4) { animation-delay: 0.6s; }
        .brain-dot:nth-child(5) { animation-delay: 0.8s; }

        @keyframes brainPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .landing-title {
            font-size: 3rem;
            font-weight: 800;
            letter-spacing: -2px;
            margin-bottom: 15px;
            color: #222831;
        }

        .landing-subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 40px;
        }

        .landing-features {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 1rem;
            color: #222;
            font-weight: 600;
            gap: 10px;
        }

        .feature-item i {
            font-size: 1.8rem;
            color: var(--color-main);
        }

        .enter-dashboard-btn {
            background: var(--color-main);
            color: #fff;
            font-size: 1.3rem;
            font-weight: 700;
            border: none;
            border-radius: var(--radius-lg);
            padding: 18px 40px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(31,184,205,0.4);
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 0 auto;
        }

        .enter-dashboard-btn:hover {
            background: var(--color-success);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(31,184,205,0.5);
        }

        /* Main App Hidden Initially */
        .main-app {
            display: none;
        }

        /* Header */
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: #fff;
            box-shadow: 0 2px 15px rgba(31,184,205,0.1);
            z-index: 100;
            position: sticky;
            top: 0;
        }

        [data-theme="dark"] .top-header {
            background: var(--color-dark-bg);
            color: #E6EFFF;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-main);
        }

        .ai-brain.mini {
            width: 35px;
        }

        .ai-brain.mini .brain-dot {
            width: 8px;
            height: 8px;
        }

        .live-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 16px;
            background: rgba(31,184,205,0.1);
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--color-main);
        }

        .pulse-dot {
            width: 10px;
            height: 10px;
            background: var(--color-success);
            border-radius: 50%;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .header-center {
            flex: 1;
            max-width: 400px;
            margin: 0 30px;
        }

        .search-container {
            display: flex;
            align-items: center;
            gap: 8px;
            border-radius: 12px;
            background: #f8f9fa;
            padding: 8px 16px;
        }

        [data-theme="dark"] .search-container {
            background: #2c3e50;
        }

        .voice-search-input {
            border: none;
            background: transparent;
            font-size: 1.1rem;
            width: 100%;
            color: #134259;
            padding: 8px 0;
            outline: none;
        }

        [data-theme="dark"] .voice-search-input {
            color: #E6EFFF;
        }

        .voice-trigger-btn {
            background: var(--color-main);
            color: #fff;
            border: none;
            padding: 8px;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .voice-trigger-btn:hover {
            background: var(--color-success);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .theme-toggle {
            cursor: pointer;
            font-size: 1.4rem;
            color: var(--color-main);
            padding: 8px;
            background: rgba(31,184,205,0.1);
            border-radius: 18px;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: rgba(31,184,205,0.2);
        }

        .theme-icon-light { display: inline; }
        .theme-icon-dark { display: none; }

        [data-theme="dark"] .theme-icon-light { display: none; }
        [data-theme="dark"] .theme-icon-dark { display: inline; color: #FFC185; }

        .notification-bell {
            position: relative;
            cursor: pointer;
            font-size: 1.3rem;
            color: var(--color-main);
        }

        .notification-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--color-accent);
            color: #fff;
            font-size: 0.8rem;
            font-weight: 700;
            border-radius: 50%;
            padding: 3px 6px;
            min-width: 18px;
            text-align: center;
        }

        .user-avatar img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(31,184,205,0.2);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 77px;
            left: 0;
            width: 80px;
            background: #fff;
            z-index: 70;
            height: calc(100vh - 77px);
            display: flex;
            flex-direction: column;
            padding: 25px 0;
            box-shadow: 2px 0 10px rgba(31,184,205,0.08);
        }

        [data-theme="dark"] .sidebar {
            background: #2c3e50;
            color: #E6EFFF;
        }

        .nav-section {
            display: flex;
            flex-direction: column;
            gap: 25px;
            align-items: center;
        }

        .nav-item {
            background: none;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: #666;
            cursor: pointer;
            position: relative;
            padding: 15px 0;
            transition: all 0.2s;
            width: 100%;
            text-align: center;
        }

        .nav-item.active,
        .nav-item:hover {
            background: rgba(31,184,205,0.15);
            color: var(--color-main);
        }

        .nav-item i {
            font-size: 1.4rem;
        }

        .nav-item span {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .task-count,
        .ai-status-dot {
            font-size: 0.7rem;
            font-weight: 700;
            background: var(--color-accent);
            color: #fff;
            border-radius: 50%;
            padding: 2px 6px;
            position: absolute;
            top: 8px;
            right: 15px;
        }

        .ai-status-dot.active {
            background: var(--color-success);
        }

        /* Main Content */
        .main-content {
            margin-left: 80px;
            padding: 40px;
            min-height: calc(100vh - 77px);
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .section-header h1 {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--color-main);
            margin: 0;
        }

        .section-subtitle {
            font-size: 1.1rem;
            color: #666;
            margin-top: 5px;
        }

        .real-time-clock {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(31,184,205,0.1);
            padding: 10px 18px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 1rem;
            color: var(--color-main);
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .metric-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(31,184,205,0.08);
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 30px 25px;
            transition: all 0.3s;
            cursor: pointer;
        }

        [data-theme="dark"] .metric-card {
            background: #1A2329;
            color: #E6EFFF;
        }

        .metric-card:hover {
            box-shadow: 0 8px 30px rgba(31,184,205,0.15);
            transform: translateY(-3px) scale(1.02);
        }

        .metric-icon {
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(31,184,205,0.1);
            transition: all 0.3s;
        }

        .metric-content h3 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-main);
        }

        .metric-label {
            font-size: 1.1rem;
            color: #666;
            margin: 5px 0;
        }

        .metric-change {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .metric-change.positive {
            color: var(--color-success);
        }

        .metric-change.negative {
            color: var(--color-accent);
        }

        .real-time-counter {
            font-size: 1rem;
            color: var(--color-success);
            margin-top: 8px;
            font-weight: 600;
        }

        /* Charts */
        .dashboard-charts {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 35px;
        }

        .chart-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(31,184,205,0.08);
            padding: 25px;
        }

        [data-theme="dark"] .chart-card {
            background: #1A2329;
        }

        .chart-card h3 {
            margin: 0 0 20px 0;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--color-main);
        }

        .chart-container {
            height: 250px;
            position: relative;
        }

        /* Tasks Section */
        .task-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f8f9fa;
            border: 2px solid transparent;
            color: #666;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--color-main);
            color: #fff;
            border-color: var(--color-main);
        }

        .tasks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .task-card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(31,184,205,0.08);
            padding: 25px;
            transition: all 0.3s;
            cursor: pointer;
        }

        [data-theme="dark"] .task-card {
            background: #1A2329;
        }

        .task-card:hover {
            box-shadow: 0 8px 25px rgba(31,184,205,0.15);
            transform: translateY(-2px);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .task-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--color-main);
        }

        .task-priority {
            padding: 5px 12px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .task-priority.high {
            background: rgba(180,65,60,0.15);
            color: var(--color-alt);
        }

        .task-priority.medium {
            background: rgba(255,193,133,0.15);
            color: #e67e22;
        }

        .task-priority.low {
            background: rgba(31,184,205,0.15);
            color: var(--color-main);
        }

        .task-course {
            color: #666;
            font-size: 1rem;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
            color: #666;
        }

        .task-status {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .status-indicator.in-progress {
            background: var(--color-accent);
        }

        .status-indicator.completed {
            background: var(--color-success);
        }

        .status-indicator.not-started {
            background: var(--color-main);
        }

        .task-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        .task-btn {
            background: var(--color-main);
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .task-btn:hover {
            background: var(--color-success);
        }

        .task-btn.secondary {
            background: #f8f9fa;
            color: #666;
        }

        .task-btn.secondary:hover {
            background: #e9ecef;
        }

        /* AI Chat Interface */
        .ai-chat-container {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(31,184,205,0.08);
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        [data-theme="dark"] .ai-chat-container {
            background: #1A2329;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .message.ai .message-avatar {
            background: var(--color-main);
            color: #fff;
        }

        .message.user .message-avatar {
            background: var(--color-accent);
            color: #fff;
        }

        .message-content {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            max-width: 70%;
        }

        .message.user .message-content {
            background: var(--color-main);
            color: #fff;
        }

        .chat-input-container {
            padding: 20px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 12px;
            outline: none;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .chat-input:focus {
            border-color: var(--color-main);
        }

        .chat-send-btn {
            background: var(--color-main);
            color: #fff;
            border: none;
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .chat-send-btn:hover {
            background: var(--color-success);
        }

        /* Voice Modal */
        .voice-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(34, 40, 49, 0.8);
            z-index: 99999;
            align-items: center;
            justify-content: center;
        }

        .voice-modal.active {
            display: flex;
        }

        .voice-modal-content {
            background: #fff;
            border-radius: 20px;
            padding: 50px 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
            min-width: 400px;
            position: relative;
        }

        .voice-animation {
            margin-bottom: 25px;
        }

        .sound-wave {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .wave {
            width: 12px;
            height: 30px;
            background: var(--color-main);
            border-radius: 15px;
            animation: waveAnim 1.2s infinite ease-in-out;
        }

        .wave:nth-child(1) { animation-delay: 0s; }
        .wave:nth-child(2) { animation-delay: 0.2s; }
        .wave:nth-child(3) { animation-delay: 0.4s; }
        .wave:nth-child(4) { animation-delay: 0.6s; }

        @keyframes waveAnim {
            0%, 100% { height: 15px; }
            50% { height: 45px; background: var(--color-success); }
        }

        #voiceStatus {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-main);
            margin-bottom: 15px;
        }

        #voiceTranscript {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 25px;
            min-height: 25px;
        }

        .voice-suggestions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .voice-suggestions button {
            background: var(--color-main);
            color: #fff;
            padding: 10px 20px;
            border-radius: 15px;
            border: none;
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .voice-suggestions button:hover {
            background: var(--color-success);
        }

        .close-voice-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: var(--color-alt);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Notification Panel */
        .notification-panel {
            display: none;
            position: fixed;
            top: 100px;
            right: 30px;
            width: 380px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(31,184,205,0.2);
            z-index: 200;
            animation: slideInRight 0.3s ease;
        }

        .notification-panel.active {
            display: block;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px;
            border-bottom: 1px solid rgba(31,184,205,0.1);
        }

        .notification-header h3 {
            margin: 0;
            font-size: 1.3rem;
            color: var(--color-main);
        }

        .notification-header button {
            background: none;
            border: none;
            font-size: 1.2rem;
            color: #666;
            cursor: pointer;
        }

        .notification-list {
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .notification-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 18px;
        }

        .notification-item.urgent {
            background: rgba(180,65,60,0.1);
            border-left: 4px solid var(--color-alt);
        }

        .notification-item.success {
            background: rgba(33,184,133,0.1);
            border-left: 4px solid var(--color-success);
        }

        .notification-item i {
            font-size: 1.2rem;
            margin-top: 2px;
        }

        .notification-time {
            font-size: 0.85rem;
            color: #999;
            margin-top: 5px;
        }

        /* Card Styles */
        .card {
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(31,184,205,0.08);
            padding: 25px;
            margin-bottom: 25px;
        }

        [data-theme="dark"] .card {
            background: #1A2329;
        }

        .card h3 {
            margin: 0 0 20px 0;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-main);
        }

        /* AI Insights */
        .ai-insights-card {
            border-left: 5px solid var(--color-main);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .confidence-badge {
            background: var(--color-success);
            color: #fff;
            padding: 5px 12px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .insight-text {
            margin-bottom: 20px;
            line-height: 1.7;
            font-size: 1rem;
        }

        .insight-recommendations h5 {
            margin-bottom: 15px;
            font-size: 1.1rem;
            color: var(--color-main);
        }

        .insight-recommendations ul {
            list-style: none;
            padding: 0;
        }

        .insight-recommendations li {
            margin-bottom: 10px;
            color: #666;
            padding-left: 20px;
            position: relative;
        }

        .insight-recommendations li::before {
            content: "â€¢";
            color: var(--color-main);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .dashboard-charts {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 60px;
            }
            
            .nav-item span {
                display: none;
            }
            
            .main-content {
                margin-left: 60px;
                padding: 20px;
            }
            
            .landing-features {
                flex-direction: column;
                gap: 20px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .header-center {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .landing-content {
                padding: 40px 20px;
                width: 95%;
            }
            
            .landing-title {
                font-size: 2.5rem;
            }
            
            .top-header {
                padding: 15px 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .sidebar {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
                padding: 15px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-in {
            animation: fadeIn 0.6s ease-out;
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }
        .hidden { display: none !important; }
    </style>
</head>
<body>
    <!-- Landing Screen -->
    <div id="landingScreen" class="landing-screen active">
        <div class="landing-content">
            <div class="logo-animation">
                <div class="ai-brain">
                    <div class="brain-dot"></div>
                    <div class="brain-dot"></div>
                    <div class="brain-dot"></div>
                    <div class="brain-dot"></div>
                    <div class="brain-dot"></div>
                </div>
                <h1 class="landing-title">AIVY</h1>
                <p class="landing-subtitle">Your AI-Powered Learning Assistant</p>
                <div class="landing-features">
                    <div class="feature-item">
                        <i class="fas fa-brain"></i>
                        <span>Smart Analytics</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-microphone"></i>
                        <span>Voice Assistant</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Real-time Tracking</span>
                    </div>
                </div>
                <button class="enter-dashboard-btn" onclick="enterDashboard()">
                    <span>Enter Dashboard</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app">
        <!-- Top Header -->
        <header class="top-header">
            <div class="header-left">
                <div class="logo">
                    <div class="ai-brain mini">
                        <div class="brain-dot"></div>
                        <div class="brain-dot"></div>
                        <div class="brain-dot"></div>
                    </div>
                    <span class="logo-text">AIVY</span>
                </div>
                <div class="live-indicator">
                    <div class="pulse-dot"></div>
                    <span>Live Updates</span>
                </div>
            </div>
            
            <div class="header-center">
                <div class="search-container">
                    <input type="text" placeholder="Ask me anything..." class="voice-search-input" id="headerInput">
                    <button class="voice-trigger-btn" onclick="toggleVoiceAssistant()">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
            </div>

            <div class="header-right">
                <div class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-sun theme-icon-light"></i>
                    <i class="fas fa-moon theme-icon-dark"></i>
                </div>
                <div class="notification-bell" onclick="showNotifications()">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count" id="notificationCount">3</span>
                </div>
                <div class="user-avatar">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%231FB8CD'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' font-size='18' font-family='Arial' fill='white'%3ES%3C/text%3E%3C/svg%3E" alt="User Avatar">
                </div>
            </div>
        </header>

        <!-- Voice Assistant Modal -->
        <div id="voiceModal" class="voice-modal">
            <div class="voice-modal-content">
                <div class="voice-animation">
                    <div class="sound-wave">
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                    </div>
                </div>
                <h3 id="voiceStatus">Click to speak</h3>
                <p id="voiceTranscript"></p>
                <div class="voice-suggestions">
                    <button onclick="askVoiceQuestion('What are my upcoming deadlines?')">Upcoming Deadlines</button>
                    <button onclick="askVoiceQuestion('Show my performance analytics')">Performance Analytics</button>
                    <button onclick="askVoiceQuestion('Generate study plan')">Study Plan</button>
                </div>
                <button class="close-voice-btn" onclick="closeVoiceModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Notification Panel -->
        <div id="notificationPanel" class="notification-panel">
            <div class="notification-header">
                <h3>Notifications</h3>
                <button onclick="closeNotifications()"><i class="fas fa-times"></i></button>
            </div>
            <div class="notification-list" id="notificationList">
                <!-- Notifications populated by JS -->
            </div>
        </div>

        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="nav-section">
                <div class="nav-item active" data-section="dashboard" onclick="navigateToSection('dashboard')">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                
                <div class="nav-item" data-section="tasks" onclick="navigateToSection('tasks')">
                    <i class="fas fa-tasks"></i>
                    <span>Tasks</span>
                    <div class="task-count" id="taskCount">8</div>
                </div>
                
                <div class="nav-item" data-section="analytics" onclick="navigateToSection('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </div>
                
                <div class="nav-item" data-section="ai-assistant" onclick="navigateToSection('ai-assistant')">
                    <i class="fas fa-robot"></i>
                    <span>AI Assistant</span>
                    <div class="ai-status-dot active"></div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="section-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p class="section-subtitle">Welcome back! Here's your learning progress</p>
                    </div>
                    <div class="real-time-clock">
                        <i class="fas fa-clock"></i>
                        <span id="currentTime"></span>
                    </div>
                </div>

                <!-- Key Metrics -->
                <div class="metrics-grid">
                    <div class="metric-card" data-metric="courses" onclick="showMetricDetail('courses')">
                        <div class="metric-icon" style="background: linear-gradient(135deg, #1FB8CD, #21B885);">
                            <i class="fas fa-book" style="color: white;"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="totalCourses">4</h3>
                            <p class="metric-label">Total Courses</p>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+1 this week</span>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card" data-metric="assignments" onclick="showMetricDetail('assignments')">
                        <div class="metric-icon" style="background: linear-gradient(135deg, #FFC185, #FF9A56);">
                            <i class="fas fa-clipboard-list" style="color: white;"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="activeAssignments">8</h3>
                            <p class="metric-label">Active Assignments</p>
                            <div class="metric-change negative">
                                <i class="fas fa-arrow-down"></i>
                                <span id="assignmentChange">2 completed today</span>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card" data-metric="study-hours" onclick="showMetricDetail('study-hours')">
                        <div class="metric-icon" style="background: linear-gradient(135deg, #21B885, #17A971);">
                            <i class="fas fa-clock" style="color: white;"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="studyHours">32.5h</h3>
                            <p class="metric-label">Study Hours</p>
                            <div class="real-time-counter">
                                <span id="liveStudyTime">+2.5h today</span>
                            </div>
                        </div>
                    </div>

                    <div class="metric-card" data-metric="performance" onclick="showMetricDetail('performance')">
                        <div class="metric-icon" style="background: linear-gradient(135deg, #B4413C, #A83731);">
                            <i class="fas fa-trophy" style="color: white;"></i>
                        </div>
                        <div class="metric-content">
                            <h3 id="performanceScore">78%</h3>
                            <p class="metric-label">Performance Score</p>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                <span>+5% this week</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="dashboard-charts">
                    <div class="chart-card">
                        <h3>ðŸ“ˆ Learning Progress Trend</h3>
                        <div class="chart-container">
                            <canvas id="progressChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3>ðŸ“Š Subject Performance</h3>
                        <div class="chart-container">
                            <canvas id="subjectChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- AI Insights -->
                <div class="card ai-insights-card">
                    <div class="insight-header">
                        <h3>ðŸ¤– AI Insights & Recommendations</h3>
                        <div class="confidence-badge">85% Accuracy</div>
                    </div>
                    
                    <div class="insight-content">
                        <h4>Performance Analysis</h4>
                        <p class="insight-text">You're <strong>80% strong in Python</strong> and excelling in Web Development, but showing weakness in <strong>ML basics and Neural Networks</strong>. Focus on fundamentals before advancing to complex topics.</p>
                        
                        <div class="insight-recommendations">
                            <h5>Recommended Actions:</h5>
                            <ul id="aiRecommendations">
                                <li>Dedicate 2 hours this week to Neural Network fundamentals</li>
                                <li>Practice TensorFlow tutorials for hands-on experience</li>
                                <li>Review Database query optimization concepts</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Tasks Section -->
            <section id="tasks" class="content-section">
                <div class="section-header">
                    <div>
                        <h1>Task Manager</h1>
                        <p class="section-subtitle">Manage your assignments and track progress</p>
                    </div>
                </div>

                <div class="task-filters">
                    <button class="filter-btn active" data-filter="all" onclick="filterTasks('all')">All Tasks</button>
                    <button class="filter-btn" data-filter="high" onclick="filterTasks('high')">High Priority</button>
                    <button class="filter-btn" data-filter="medium" onclick="filterTasks('medium')">Medium Priority</button>
                    <button class="filter-btn" data-filter="completed" onclick="filterTasks('completed')">Completed</button>
                </div>

                <div class="tasks-grid" id="tasksContainer">
                    <!-- Tasks populated by JavaScript -->
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="analytics" class="content-section">
                <div class="section-header">
                    <div>
                        <h1>Learning Analytics</h1>
                        <p class="section-subtitle">Deep insights into your learning patterns</p>
                    </div>
                </div>

                <div class="chart-card">
                    <h3>ðŸ“Š Knowledge Gap Analysis</h3>
                    <div class="chart-container">
                        <canvas id="analyticsChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- AI Assistant Section -->
            <section id="ai-assistant" class="content-section">
                <div class="section-header">
                    <div>
                        <h1>ðŸ¤– AI Study Assistant</h1>
                        <p class="section-subtitle">Your intelligent learning companion</p>
                    </div>
                </div>

                <div class="ai-chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message ai">
                            <div class="message-avatar">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="message-content">
                                <p>Hi! I'm your AI study assistant. How can I help you today? You can ask me about deadlines, performance analysis, study recommendations, or anything else!</p>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" placeholder="Type your message..." class="chat-input" id="chatInput">
                        <button class="chat-send-btn" onclick="sendChatMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // --- COMPLETE WORKING JAVASCRIPT ---
        
        // Application Data with Real Functionality
        const appData = {
            studentProfile: { 
                name: "Student User", 
                totalCourses: 4, 
                activeAssignments: 8, 
                studyHours: 32.5, 
                performanceScore: 78 
            },
            tasks: [
                { 
                    id: 1, 
                    title: "ML Project Report", 
                    course: "Machine Learning", 
                    dueDate: "2025-09-30", 
                    priority: "high", 
                    status: "in-progress", 
                    estimatedHours: 8,
                    description: "Complete machine learning project report with analysis and conclusions"
                },
                { 
                    id: 2, 
                    title: "React Component Design", 
                    course: "Web Development", 
                    dueDate: "2025-10-02", 
                    priority: "medium", 
                    status: "not-started", 
                    estimatedHours: 4,
                    description: "Design and implement reusable React components"
                },
                { 
                    id: 3, 
                    title: "Database Query Optimization", 
                    course: "Database Systems", 
                    dueDate: "2025-10-05", 
                    priority: "high", 
                    status: "in-progress", 
                    estimatedHours: 6,
                    description: "Optimize database queries for better performance"
                },
                { 
                    id: 4, 
                    title: "Graph Algorithms Implementation", 
                    course: "Data Structures", 
                    dueDate: "2025-09-28", 
                    priority: "completed", 
                    status: "completed", 
                    estimatedHours: 5,
                    description: "Implement BFS and DFS graph algorithms"
                },
                { 
                    id: 5, 
                    title: "Neural Networks Study", 
                    course: "Machine Learning", 
                    dueDate: "2025-10-08", 
                    priority: "medium", 
                    status: "not-started", 
                    estimatedHours: 3,
                    description: "Study neural network fundamentals and architectures"
                }
            ],
            performanceData: {
                overallTrend: [65, 68, 72, 75, 78, 82, 78],
                subjectPerformance: {
                    "Machine Learning": 72,
                    "Data Structures": 85,
                    "Database Systems": 68,
                    "Web Development": 90
                },
                knowledgeGaps: [
                    { topic: "Neural Networks", confidence: 45 },
                    { topic: "Query Optimization", confidence: 52 },
                    { topic: "Deep Learning", confidence: 38 },
                    { topic: "React Hooks", confidence: 78 },
                    { topic: "Graph Theory", confidence: 88 }
                ]
            },
            notifications: [
                {
                    id: 1,
                    type: "urgent",
                    icon: "fas fa-exclamation-triangle",
                    title: "Deadline Alert!",
                    message: "ML Project Report due in 2 days",
                    time: "Just now",
                    read: false
                },
                {
                    id: 2,
                    type: "info",
                    icon: "fas fa-lightbulb",
                    title: "Study Recommendation",
                    message: "Perfect time to study Neural Networks",
                    time: "5 min ago",
                    read: false
                },
                {
                    id: 3,
                    type: "success",
                    icon: "fas fa-check-circle",
                    title: "Goal Achieved!",
                    message: "Study streak: 7 days completed",
                    time: "1 hour ago",
                    read: true
                }
            ]
        };

        // Global variables
        let currentTheme = "light";
        let currentFilter = "all";
        let progressChart = null;
        let subjectChart = null;
        let analyticsChart = null;
        let synth = window.speechSynthesis;
        let studyStartTime = Date.now();
        let totalStudyHours = 32.5;

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => animateLanding(), 500);
            initializeApp();
        });

        function initializeApp() {
            updateRealTimeClock();
            renderNotifications();
            renderTasks();
            setTimeout(() => animateMetrics(), 1000);
            setTimeout(() => initializeCharts(), 1500);
            startRealTimeUpdates();
            setupEventListeners();
        }

        function setupEventListeners() {
            // Enter key for chat
            document.getElementById('chatInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });

            // Enter key for header search
            document.getElementById('headerInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleHeaderSearch();
                }
            });

            // Close notifications when clicking outside
            document.addEventListener('click', function(e) {
                const panel = document.getElementById('notificationPanel');
                const bell = document.querySelector('.notification-bell');
                
                if (panel.classList.contains('active') && !panel.contains(e.target) && !bell.contains(e.target)) {
                    closeNotifications();
                }
            });
        }

        // Landing Animation
        function animateLanding() {
            if (typeof gsap !== 'undefined') {
                gsap.from(".landing-content", {
                    y: 50,
                    opacity: 0,
                    duration: 1.2,
                    ease: "power2.out"
                });
            }
        }

        function enterDashboard() {
            const landing = document.getElementById("landingScreen");
            const mainApp = document.getElementById("mainApp");
            
            landing.classList.add("inactive");
            setTimeout(() => {
                landing.style.display = "none";
                mainApp.style.display = "block";
                mainApp.classList.add("animate-in");
            }, 800);
        }

        // Navigation System
        function navigateToSection(section) {
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.section === section) {
                    item.classList.add('active');
                }
            });

            // Show section with animation
            document.querySelectorAll('.content-section').forEach(sec => {
                sec.classList.remove('active');
            });
            
            const targetSection = document.getElementById(section);
            targetSection.classList.add('active');
            
            // Section-specific actions
            if (section === 'analytics') {
                setTimeout(() => initializeAnalyticsChart(), 100);
            }
        }

        // Theme Toggle with Persistence
        function toggleTheme() {
            currentTheme = currentTheme === "light" ? "dark" : "light";
            document.documentElement.setAttribute('data-theme', currentTheme);
            localStorage.setItem('aivy-theme', currentTheme);
            
            // Update charts colors for theme
            updateChartsForTheme();
        }

        // Real-time Clock and Updates
        function updateRealTimeClock() {
            const clockElem = document.getElementById('currentTime');
            if (clockElem) {
                function updateTime() {
                    const now = new Date();
                    clockElem.textContent = now.toLocaleTimeString([], {
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                }
                updateTime();
                setInterval(updateTime, 1000);
            }
        }

        function startRealTimeUpdates() {
            // Update study hours every minute
            setInterval(() => {
                const now = Date.now();
                const hoursStudied = (now - studyStartTime) / (1000 * 60 * 60);
                const newTotal = (totalStudyHours + hoursStudied).toFixed(1);
                
                document.getElementById('studyHours').textContent = newTotal + 'h';
                document.getElementById('liveStudyTime').textContent = `+${hoursStudied.toFixed(1)}h today`;
            }, 60000);

            // Update performance score gradually
            setInterval(() => {
                const currentScore = parseInt(document.getElementById('performanceScore').textContent);
                if (Math.random() > 0.8) { // 20% chance to update
                    const change = Math.random() > 0.6 ? 1 : -1;
                    const newScore = Math.max(65, Math.min(95, currentScore + change));
                    document.getElementById('performanceScore').textContent = newScore + '%';
                    updateProgressChart();
                }
            }, 30000);

            // Add new notifications occasionally
            setInterval(() => {
                if (Math.random() > 0.9) { // 10% chance
                    addRandomNotification();
                }
            }, 120000);
        }

        // Animate metrics with enhanced counting effect
        function animateMetrics() {
            const metrics = [
                { id: 'totalCourses', value: appData.studentProfile.totalCourses },
                { id: 'activeAssignments', value: appData.studentProfile.activeAssignments },
                { id: 'studyHours', value: appData.studentProfile.studyHours, suffix: 'h' },
                { id: 'performanceScore', value: appData.studentProfile.performanceScore, suffix: '%' }
            ];

            metrics.forEach((metric, index) => {
                setTimeout(() => {
                    const element = document.getElementById(metric.id);
                    if (element) {
                        animateNumber(element, 0, metric.value, metric.suffix || '');
                    }
                }, index * 200);
            });
        }

        function animateNumber(element, start, end, suffix) {
            const duration = 1500;
            const steps = 60;
            const stepValue = (end - start) / steps;
            const stepDuration = duration / steps;
            
            let current = start;
            const timer = setInterval(() => {
                current += stepValue;
                if (current >= end) {
                    current = end;
                    clearInterval(timer);
                }
                
                const displayValue = suffix === 'h' ? current.toFixed(1) : Math.round(current);
                element.textContent = displayValue + suffix;
            }, stepDuration);
        }

        // Enhanced Chart System
        function initializeCharts() {
            if (typeof Chart === 'undefined') {
                console.log('Chart.js not loaded yet, retrying...');
                setTimeout(initializeCharts, 1000);
                return;
            }

            initializeProgressChart();
            initializeSubjectChart();
        }

        function initializeProgressChart() {
            const ctx = document.getElementById('progressChart');
            if (!ctx) return;

            if (progressChart) {
                progressChart.destroy();
            }

            progressChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7'],
                    datasets: [{
                        label: 'Performance Score',
                        data: appData.performanceData.overallTrend,
                        borderColor: '#1FB8CD',
                        backgroundColor: 'rgba(31,184,205,0.1)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#FFC185',
                        pointRadius: 8,
                        pointBorderColor: '#fff',
                        pointBorderWidth: 3,
                        pointHoverRadius: 10,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 1500,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: '#1FB8CD',
                            borderWidth: 2
                        }
                    },
                    scales: {
                        y: {
                            min: 60,
                            max: 100,
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            ticks: { callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: 'rgba(0,0,0,0.05)' }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function initializeSubjectChart() {
            const ctx = document.getElementById('subjectChart');
            if (!ctx) return;

            if (subjectChart) {
                subjectChart.destroy();
            }

            const subjects = Object.keys(appData.performanceData.subjectPerformance);
            const scores = Object.values(appData.performanceData.subjectPerformance);

            subjectChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: subjects,
                    datasets: [{
                        data: scores,
                        backgroundColor: ['#1FB8CD', '#FFC185', '#B4413C', '#21B885'],
                        borderWidth: 4,
                        borderColor: '#fff',
                        hoverBorderWidth: 6,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true,
                                font: { size: 12, weight: '600' }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 1500
                    }
                }
            });
        }

        function initializeAnalyticsChart() {
            const ctx = document.getElementById('analyticsChart');
            if (!ctx) return;

            if (analyticsChart) {
                analyticsChart.destroy();
            }

            const gaps = appData.performanceData.knowledgeGaps;

            analyticsChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: gaps.map(g => g.topic),
                    datasets: [{
                        label: 'Confidence Level',
                        data: gaps.map(g => g.confidence),
                        backgroundColor: gaps.map(g => 
                            g.confidence < 50 ? '#B4413C' : 
                            g.confidence < 70 ? '#FFC185' : '#21B885'
                        ),
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            callbacks: {
                                label: function(context) {
                                    return 'Confidence: ' + context.parsed.y + '%';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            ticks: { maxRotation: 45 }
                        }
                    },
                    animation: { duration: 1200 }
                }
            });
        }

        function updateProgressChart() {
            if (progressChart) {
                // Add new data point
                const currentScore = parseInt(document.getElementById('performanceScore').textContent);
                appData.performanceData.overallTrend.push(currentScore);
                
                // Keep only last 7 points
                if (appData.performanceData.overallTrend.length > 7) {
                    appData.performanceData.overallTrend.shift();
                }
                
                progressChart.data.datasets[0].data = appData.performanceData.overallTrend;
                progressChart.update('active');
            }
        }

        function updateChartsForTheme() {
            const isDark = currentTheme === 'dark';
            const textColor = isDark ? '#E6EFFF' : '#134259';
            
            [progressChart, subjectChart, analyticsChart].forEach(chart => {
                if (chart) {
                    chart.options.scales.x.ticks.color = textColor;
                    chart.options.scales.y.ticks.color = textColor;
                    chart.update();
                }
            });
        }

        // Task Management System
        function renderTasks() {
            const container = document.getElementById('tasksContainer');
            const filteredTasks = getFilteredTasks();
            
            container.innerHTML = filteredTasks.map(task => createTaskCard(task)).join('');
            
            // Update task count in sidebar
            const activeCount = appData.tasks.filter(t => t.status !== 'completed').length;
            document.getElementById('taskCount').textContent = activeCount;
        }

        function getFilteredTasks() {
            let filtered = appData.tasks;
            
            switch(currentFilter) {
                case 'high':
                    return filtered.filter(t => t.priority === 'high' && t.status !== 'completed');
                case 'medium':
                    return filtered.filter(t => t.priority === 'medium' && t.status !== 'completed');
                case 'completed':
                    return filtered.filter(t => t.status === 'completed');
                default:
                    return filtered;
            }
        }

        function createTaskCard(task) {
            const dueDate = new Date(task.dueDate);
            const today = new Date();
            const daysUntilDue = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
            
            let dueDateText = task.dueDate;
            if (daysUntilDue === 0) dueDateText = "Due Today";
            else if (daysUntilDue === 1) dueDateText = "Due Tomorrow";
            else if (daysUntilDue < 0) dueDateText = "Overdue";
            
            const priorityClass = task.priority === 'completed' ? task.status : task.priority;
            
            return `
                <div class="task-card" onclick="showTaskDetail(${task.id})">
                    <div class="task-header">
                        <h3 class="task-title">${task.title}</h3>
                        <span class="task-priority ${priorityClass}">${priorityClass}</span>
                    </div>
                    <div class="task-course">${task.course}</div>
                    <div class="task-meta">
                        <span class="task-status">
                            <span class="status-indicator ${task.status}"></span>
                            ${task.status.replace('-', ' ')}
                        </span>
                        <span class="task-due">${dueDateText}</span>
                        <span class="task-hours">${task.estimatedHours}h</span>
                    </div>
                    <div class="task-actions">
                        <button class="task-btn" onclick="event.stopPropagation(); updateTaskStatus(${task.id})">
                            ${task.status === 'completed' ? 'Reopen' : 'Mark Complete'}
                        </button>
                        <button class="task-btn secondary" onclick="event.stopPropagation(); editTask(${task.id})">
                            Edit
                        </button>
                    </div>
                </div>
            `;
        }

        function filterTasks(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.filter === filter) {
                    btn.classList.add('active');
                }
            });
            
            renderTasks();
        }

        function updateTaskStatus(taskId) {
            const task = appData.tasks.find(t => t.id === taskId);
            if (task) {
                if (task.status === 'completed') {
                    task.status = 'in-progress';
                } else {
                    task.status = 'completed';
                    
                    // Add completion notification
                    addNotification({
                        type: 'success',
                        icon: 'fas fa-check-circle',
                        title: 'Task Completed!',
                        message: `${task.title} marked as complete`,
                        time: 'Just now'
                    });
                }
                
                renderTasks();
                updateAssignmentMetrics();
            }
        }

        function updateAssignmentMetrics() {
            const activeCount = appData.tasks.filter(t => t.status !== 'completed').length;
            const completedToday = appData.tasks.filter(t => 
                t.status === 'completed' && 
                new Date(t.completedDate || new Date()).toDateString() === new Date().toDateString()
            ).length;
            
            document.getElementById('activeAssignments').textContent = activeCount;
            document.getElementById('assignmentChange').textContent = `${completedToday} completed today`;
        }

        function showTaskDetail(taskId) {
            const task = appData.tasks.find(t => t.id === taskId);
            if (task) {
                speakText(`Task: ${task.title}. Course: ${task.course}. Priority: ${task.priority}. Status: ${task.status}. ${task.description}`);
            }
        }

        function editTask(taskId) {
            const task = appData.tasks.find(t => t.id === taskId);
            if (task) {
                const newTitle = prompt("Edit task title:", task.title);
                if (newTitle && newTitle.trim()) {
                    task.title = newTitle.trim();
                    renderTasks();
                }
            }
        }

        // Notification System
        function renderNotifications() {
            const container = document.getElementById('notificationList');
            const unreadCount = appData.notifications.filter(n => !n.read).length;
            
            document.getElementById('notificationCount').textContent = unreadCount;
            
            container.innerHTML = appData.notifications.map(notification => `
                <div class="notification-item ${notification.type}" onclick="markNotificationRead(${notification.id})">
                    <i class="${notification.icon}" style="color: ${getNotificationColor(notification.type)};"></i>
                    <div>
                        <p><strong>${notification.title}</strong></p>
                        <p>${notification.message}</p>
                        <span class="notification-time">${notification.time}</span>
                    </div>
                </div>
            `).join('');
        }

        function getNotificationColor(type) {
            switch(type) {
                case 'urgent': return '#B4413C';
                case 'success': return '#21B885';
                default: return '#FFC185';
            }
        }

        function addNotification(notification) {
            const newNotification = {
                id: Date.now(),
                read: false,
                ...notification
            };
            
            appData.notifications.unshift(newNotification);
            renderNotifications();
        }

        function addRandomNotification() {
            const notifications = [
                {
                    type: 'info',
                    icon: 'fas fa-lightbulb',
                    title: 'Study Break Reminder',
                    message: 'You\'ve been studying for 2 hours. Time for a break!',
                    time: 'Just now'
                },
                {
                    type: 'success',
                    icon: 'fas fa-trophy',
                    title: 'Achievement Unlocked',
                    message: 'Completed 5 tasks this week!',
                    time: 'Just now'
                }
            ];
            
            const randomNotification = notifications[Math.floor(Math.random() * notifications.length)];
            addNotification(randomNotification);
        }

        function markNotificationRead(id) {
            const notification = appData.notifications.find(n => n.id === id);
            if (notification) {
                notification.read = true;
                renderNotifications();
            }
        }

        function showNotifications() {
            document.getElementById('notificationPanel').classList.add('active');
        }

        function closeNotifications() {
            document.getElementById('notificationPanel').classList.remove('active');
        }

        // Voice Assistant System
        function toggleVoiceAssistant() {
            const modal = document.getElementById('voiceModal');
            modal.classList.toggle('active');
            
            if (modal.classList.contains('active')) {
                document.getElementById('voiceStatus').textContent = "Listening...";
                startListening();
            }
        }

        function closeVoiceModal() {
            document.getElementById('voiceModal').classList.remove('active');
            if (synth) synth.cancel();
        }

        function startListening() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                const recognition = new SpeechRecognition();
                
                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = 'en-US';
                
                recognition.onstart = function() {
                    document.getElementById('voiceStatus').textContent = "Listening... Speak now";
                };
                
                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('voiceTranscript').textContent = transcript;
                    processVoiceCommand(transcript);
                };
                
                recognition.onerror = function(event) {
                    document.getElementById('voiceStatus').textContent = "Error: " + event.error;
                };
                
                recognition.start();
            } else {
                document.getElementById('voiceStatus').textContent = "Voice recognition not supported";
            }
        }

        function askVoiceQuestion(question) {
            document.getElementById('voiceTranscript').textContent = question;
            processVoiceCommand(question);
        }

        function processVoiceCommand(command) {
            document.getElementById('voiceStatus').textContent = "Processing...";
            
            setTimeout(() => {
                const response = getAIResponse(command);
                document.getElementById('voiceStatus').textContent = "Speaking answer...";
                speakText(response);
                
                // Add to chat if AI Assistant section is active
                if (document.getElementById('ai-assistant').classList.contains('active')) {
                    addChatMessage('user', command);
                    setTimeout(() => addChatMessage('ai', response), 500);
                }
                
                setTimeout(() => {
                    document.getElementById('voiceStatus').textContent = "Ready for next question";
                }, 1000);
            }, 1000);
        }

        function speakText(text) {
            if (!synth) return;
            
            synth.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 1.0;
            utterance.pitch = 1.0;
            utterance.volume = 0.8;
            
            // Try to use a more natural voice
            const voices = synth.getVoices();
            const preferredVoice = voices.find(voice => 
                voice.name.includes('Google') || 
                voice.name.includes('Microsoft') ||
                voice.lang.includes('en')
            );
            if (preferredVoice) {
                utterance.voice = preferredVoice;
            }
            
            synth.speak(utterance);
        }

        // Enhanced AI Response System
        function getAIResponse(input) {
            const lowerInput = input.toLowerCase();
            
            if (lowerInput.includes('deadline') || lowerInput.includes('due')) {
                const urgentTasks = appData.tasks.filter(t => {
                    const dueDate = new Date(t.dueDate);
                    const today = new Date();
                    const daysLeft = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
                    return daysLeft <= 3 && t.status !== 'completed';
                });
                
                if (urgentTasks.length === 0) {
                    return "Great news! You have no urgent deadlines coming up.";
                }
                
                return `You have ${urgentTasks.length} urgent deadline${urgentTasks.length > 1 ? 's' : ''}: ${urgentTasks.map(t => `${t.title} due ${t.dueDate}`).join(', ')}.`;
            }
            
            if (lowerInput.includes('performance') || lowerInput.includes('analytics')) {
                const currentScore = document.getElementById('performanceScore').textContent;
                const subjects = appData.performanceData.subjectPerformance;
                const best = Object.keys(subjects).reduce((a, b) => subjects[a] > subjects[b] ? a : b);
                const worst = Object.keys(subjects).reduce((a, b) => subjects[a] < subjects[b] ? a : b);
                
                return `Your current performance is ${currentScore}. You're strongest in ${best} at ${subjects[best]}%, and should focus on ${worst} which is at ${subjects[worst]}%.`;
            }
            
            if (lowerInput.includes('study plan') || lowerInput.includes('schedule')) {
                const weakAreas = appData.performanceData.knowledgeGaps
                    .filter(g => g.confidence < 60)
                    .map(g => g.topic);
                
                if (weakAreas.length === 0) {
                    return "You're doing great! Continue with your current study routine and maybe explore advanced topics.";
                }
                
                return `Based on your weak areas, I recommend studying: ${weakAreas.slice(0, 3).join(', ')}. Spend 2 hours on each this week for maximum improvement.`;
            }
            
            if (lowerInput.includes('task') || lowerInput.includes('assignment')) {
                const inProgress = appData.tasks.filter(t => t.status === 'in-progress').length;
                const notStarted = appData.tasks.filter(t => t.status === 'not-started').length;
                
                return `You have ${inProgress} tasks in progress and ${notStarted} not started yet. I recommend focusing on high-priority items first.`;
            }
            
            if (lowerInput.includes('help') || lowerInput.includes('what can you do')) {
                return "I can help you with deadlines, performance analysis, study planning, task management, and learning recommendations. Just ask me naturally!";
            }
            
            if (lowerInput.includes('motivate') || lowerInput.includes('encourage')) {
                const motivations = [
                    "You're making excellent progress! Keep up the great work!",
                    "Every expert was once a beginner. You're on the right path!",
                    "Your consistency in studying will pay off. Stay focused!",
                    "Learning is a journey, not a race. You're doing amazingly well!"
                ];
                return motivations[Math.floor(Math.random() * motivations.length)];
            }
            
            return "I can help you with deadlines, performance analysis, study plans, and task management. What would you like to know more about?";
        }

        // Chat System
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addChatMessage('user', message);
            input.value = '';
            
            // Show typing indicator
            setTimeout(() => {
                const response = getAIResponse(message);
                addChatMessage('ai', response);
                speakText(response);
            }, 1000);
        }

        function addChatMessage(sender, message) {
            const container = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-${sender === 'ai' ? 'robot' : 'user'}"></i>
                </div>
                <div class="message-content">
                    <p>${message}</p>
                </div>
            `;
            
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
            
            // Animate new message
            if (typeof gsap !== 'undefined') {
                gsap.from(messageDiv, { y: 20, opacity: 0, duration: 0.5 });
            }
        }

        function handleHeaderSearch() {
            const input = document.getElementById('headerInput');
            const query = input.value.trim();
            
            if (!query) return;
            
            // Process search and provide response
            const response = getAIResponse(query);
            speakText(response);
            
            // Navigate to AI assistant and add message
            navigateToSection('ai-assistant');
            setTimeout(() => {
                addChatMessage('user', query);
                setTimeout(() => addChatMessage('ai', response), 500);
            }, 500);
            
            input.value = '';
        }

        // Metric Detail System
        function showMetricDetail(metric) {
            let message = '';
            
            switch(metric) {
                case 'courses':
                    message = "You're enrolled in 4 courses: Machine Learning, Data Structures, Database Systems, and Web Development. Great variety for a well-rounded education!";
                    break;
                case 'assignments':
                    const active = appData.tasks.filter(t => t.status !== 'completed').length;
                    message = `You have ${active} active assignments. Focus on high-priority items and break them into smaller tasks for better management.`;
                    break;
                case 'study-hours':
                    message = "You've studied 32.5 hours this week. Excellent dedication! Remember to take regular breaks for optimal learning.";
                    break;
                case 'performance':
                    message = "Your performance score of 78% shows strong progress. You're excelling in Web Development and doing well in Data Structures.";
                    break;
            }
            
            speakText(message);
        }

        // Initialize theme from localStorage
        const savedTheme = localStorage.getItem('aivy-theme');
        if (savedTheme) {
            currentTheme = savedTheme;
            document.documentElement.setAttribute('data-theme', currentTheme);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        toggleVoiceAssistant();
                        break;
                    case 'd':
                        e.preventDefault();
                        navigateToSection('dashboard');
                        break;
                    case 't':
                        e.preventDefault();
                        navigateToSection('tasks');
                        break;
                    case 'a':
                        e.preventDefault();
                        navigateToSection('analytics');
                        break;
                }
            }
        });

        console.log('ðŸ¤– AIVY Dashboard Loaded Successfully!');
        console.log('ðŸ’¡ Keyboard shortcuts: Ctrl+Space (Voice), Ctrl+D (Dashboard), Ctrl+T (Tasks), Ctrl+A (Analytics)');
    </script>
</body>
</html>